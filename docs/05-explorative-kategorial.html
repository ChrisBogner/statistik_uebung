<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Übung zur Vorlesung Statistik und Datenanalyse - 5&nbsp; Exploration von kategorialen Daten</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./references.html" rel="next">
<link href="./04-einlesen.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>


<link rel="stylesheet" href="stat_style.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Exploration von kategorialen Daten</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Übung zur Vorlesung Statistik und Datenanalyse</a> 
        <div class="sidebar-tools-main">
    <a href="" title="Download" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-download"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="./Übung-zur-Vorlesung-Statistik-und-Datenanalyse.pdf">
            <i class="bi bi-bi-file-pdf pe-1"></i>
          Download PDF
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="./Übung-zur-Vorlesung-Statistik-und-Datenanalyse.epub">
            <i class="bi bi-bi-journal pe-1"></i>
          Download ePub
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Vorwort</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">EINFÜHRUNG IN R</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-erste-schritte.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Erste Schritte in R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-rmarkdown.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">R Markdown für reproduzierbare Forschung</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-ggplot.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Einführung in die Darstellung von Daten</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-einlesen.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Daten in R einlesen und aus R speichern</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">EXPLORATIVE DATENANALYSE</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-explorative-kategorial.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Exploration von kategorialen Daten</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">Literatur</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Appendices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-aufgabensammlung.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Aufgabensammlung</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#mobilität-in-europa" id="toc-mobilität-in-europa" class="nav-link active" data-scroll-target="#mobilität-in-europa"> <span class="header-section-number">5.1</span> Mobilität in Europa</a>
  <ul class="collapse">
  <li><a href="#kategoriale-variablen-als-faktoren" id="toc-kategoriale-variablen-als-faktoren" class="nav-link" data-scroll-target="#kategoriale-variablen-als-faktoren"> <span class="header-section-number">5.1.1</span> Kategoriale Variablen als Faktoren</a></li>
  <li><a href="#sec-geom-col" id="toc-sec-geom-col" class="nav-link" data-scroll-target="#sec-geom-col"> <span class="header-section-number">5.1.2</span> Balkendiagramm mit <code>geom_col()</code></a></li>
  </ul></li>
  <li><a href="#lending-club-peer-to-peer-kredite" id="toc-lending-club-peer-to-peer-kredite" class="nav-link" data-scroll-target="#lending-club-peer-to-peer-kredite"> <span class="header-section-number">5.2</span> Lending Club – Peer-to-Peer-Kredite</a>
  <ul class="collapse">
  <li><a href="#häufigkeitstabelle" id="toc-häufigkeitstabelle" class="nav-link" data-scroll-target="#häufigkeitstabelle"> <span class="header-section-number">5.2.1</span> Häufigkeitstabelle</a></li>
  <li><a href="#kontingenztabelle" id="toc-kontingenztabelle" class="nav-link" data-scroll-target="#kontingenztabelle"> <span class="header-section-number">5.2.2</span> Kontingenztabelle</a></li>
  </ul></li>
  <li><a href="#aufgaben" id="toc-aufgaben" class="nav-link" data-scroll-target="#aufgaben"> <span class="header-section-number">5.3</span> Aufgaben</a>
  <ul class="collapse">
  <li><a href="#grafik-beschriften" id="toc-grafik-beschriften" class="nav-link" data-scroll-target="#grafik-beschriften"> <span class="header-section-number">5.3.1</span> Grafik beschriften</a></li>
  <li><a href="#aufgaben-der-funktion-theme" id="toc-aufgaben-der-funktion-theme" class="nav-link" data-scroll-target="#aufgaben-der-funktion-theme"> <span class="header-section-number">5.3.2</span> Aufgaben der Funktion <code>theme()</code></a></li>
  <li><a href="#tutorium" id="toc-tutorium" class="nav-link" data-scroll-target="#tutorium"> <span class="header-section-number">5.3.3</span> Tutorium</a></li>
  </ul></li>
  <li><a href="#ihre-arbeit-einreichen" id="toc-ihre-arbeit-einreichen" class="nav-link" data-scroll-target="#ihre-arbeit-einreichen"> <span class="header-section-number">5.4</span> Ihre Arbeit einreichen</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-explorative-kategorial" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Exploration von kategorialen Daten</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<div class="outcomes">
<ul>
<li>Kategoriale Variablen in Faktor umwandeln</li>
<li>Kategoriale Variablen darstellen</li>
<li>Neue Variablen mit <code>mutate()</code> erstellen</li>
<li>Häufigkeits- und Kontingenztabellen erstellen</li>
</ul>
</div>
<div class="cell">

</div>
<section id="mobilität-in-europa" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="mobilität-in-europa"><span class="header-section-number">5.1</span> Mobilität in Europa</h2>
<p>Wir nutzen erneut den Datensatz aus der ersten Sitzung der Vorlesung. Zunächst laden wir wie immer die nötigen Bibliotheken.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Das Einlesen eines Datensatzes aus einer Textdatei haben Sie ja bereits im letzten Kapitel gelernt.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>car_numbers <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">'Daten/autos_2022-11-06.csv'</span>, <span class="at">delim =</span> <span class="st">';'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 76 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ";"
chr  (2): geo, unit
dbl  (1): values
date (1): time

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<section id="kategoriale-variablen-als-faktoren" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="kategoriale-variablen-als-faktoren"><span class="header-section-number">5.1.1</span> Kategoriale Variablen als Faktoren</h3>
<p>Wir sehen uns das <code>tibble</code> etwas genauer an.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>car_numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["geo"],"name":[1],"type":["chr"],"align":["left"]},{"label":["time"],"name":[2],"type":["date"],"align":["right"]},{"label":["unit"],"name":[3],"type":["chr"],"align":["left"]},{"label":["values"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Albania","2":"2018-01-01","3":"Number","4":"161"},{"1":"Albania","2":"2020-01-01","3":"Number","4":"191"},{"1":"Austria","2":"2018-01-01","3":"Number","4":"562"},{"1":"Austria","2":"2020-01-01","3":"Number","4":"570"},{"1":"Belgium","2":"2018-01-01","3":"Number","4":"511"},{"1":"Belgium","2":"2020-01-01","3":"Number","4":"510"},{"1":"Bulgaria","2":"2018-01-01","3":"Number","4":"396"},{"1":"Bulgaria","2":"2020-01-01","3":"Number","4":"414"},{"1":"Croatia","2":"2018-01-01","3":"Number","4":"409"},{"1":"Croatia","2":"2020-01-01","3":"Number","4":"433"},{"1":"Cyprus","2":"2018-01-01","3":"Number","4":"629"},{"1":"Cyprus","2":"2020-01-01","3":"Number","4":"645"},{"1":"Czechia","2":"2018-01-01","3":"Number","4":"540"},{"1":"Czechia","2":"2020-01-01","3":"Number","4":"565"},{"1":"Denmark","2":"2018-01-01","3":"Number","4":"447"},{"1":"Denmark","2":"2020-01-01","3":"Number","4":"466"},{"1":"Estonia","2":"2018-01-01","3":"Number","4":"563"},{"1":"Estonia","2":"2020-01-01","3":"Number","4":"608"},{"1":"Finland","2":"2018-01-01","3":"Number","4":"629"},{"1":"Finland","2":"2020-01-01","3":"Number","4":"652"},{"1":"France","2":"2018-01-01","3":"Number","4":"569"},{"1":"France","2":"2020-01-01","3":"Number","4":"567"},{"1":"Germany","2":"2018-01-01","3":"Number","4":"567"},{"1":"Germany","2":"2020-01-01","3":"Number","4":"580"},{"1":"Greece","2":"2018-01-01","3":"Number","4":"493"},{"1":"Greece","2":"2020-01-01","3":"Number","4":"514"},{"1":"Hungary","2":"2018-01-01","3":"Number","4":"373"},{"1":"Hungary","2":"2020-01-01","3":"Number","4":"403"},{"1":"Iceland","2":"2018-01-01","3":"Number","4":"749"},{"1":"Iceland","2":"2020-01-01","3":"Number","4":"731"},{"1":"Ireland","2":"2018-01-01","3":"Number","4":"445"},{"1":"Ireland","2":"2020-01-01","3":"Number","4":"458"},{"1":"Italy","2":"2018-01-01","3":"Number","4":"652"},{"1":"Italy","2":"2020-01-01","3":"Number","4":"670"},{"1":"Kosovo","2":"2018-01-01","3":"Number","4":"143"},{"1":"Kosovo","2":"2020-01-01","3":"NA","4":"NA"},{"1":"Latvia","2":"2018-01-01","3":"Number","4":"369"},{"1":"Latvia","2":"2020-01-01","3":"Number","4":"390"},{"1":"Liechtenstein","2":"2018-01-01","3":"Number","4":"780"},{"1":"Liechtenstein","2":"2020-01-01","3":"Number","4":"779"},{"1":"Lithuania","2":"2018-01-01","3":"Number","4":"512"},{"1":"Lithuania","2":"2020-01-01","3":"Number","4":"560"},{"1":"Luxembourg","2":"2018-01-01","3":"Number","4":"676"},{"1":"Luxembourg","2":"2020-01-01","3":"Number","4":"682"},{"1":"Malta","2":"2018-01-01","3":"Number","4":"608"},{"1":"Malta","2":"2020-01-01","3":"Number","4":"597"},{"1":"Montenegro","2":"2018-01-01","3":"Number","4":"332"},{"1":"Montenegro","2":"2020-01-01","3":"Number","4":"338"},{"1":"Netherlands","2":"2018-01-01","3":"Number","4":"494"},{"1":"Netherlands","2":"2020-01-01","3":"Number","4":"503"},{"1":"North Macedonia","2":"2018-01-01","3":"Number","4":"200"},{"1":"North Macedonia","2":"2020-01-01","3":"Number","4":"207"},{"1":"Norway","2":"2018-01-01","3":"Number","4":"516"},{"1":"Norway","2":"2020-01-01","3":"Number","4":"544"},{"1":"Poland","2":"2018-01-01","3":"Number","4":"617"},{"1":"Poland","2":"2020-01-01","3":"Number","4":"664"},{"1":"Portugal","2":"2018-01-01","3":"Number","4":"514"},{"1":"Portugal","2":"2020-01-01","3":"Number","4":"540"},{"1":"Romania","2":"2018-01-01","3":"Number","4":"332"},{"1":"Romania","2":"2020-01-01","3":"Number","4":"379"},{"1":"Serbia","2":"2018-01-01","3":"NA","4":"NA"},{"1":"Serbia","2":"2020-01-01","3":"Number","4":"315"},{"1":"Slovakia","2":"2018-01-01","3":"Number","4":"426"},{"1":"Slovakia","2":"2020-01-01","3":"Number","4":"447"},{"1":"Slovenia","2":"2018-01-01","3":"Number","4":"549"},{"1":"Slovenia","2":"2020-01-01","3":"Number","4":"555"},{"1":"Spain","2":"2018-01-01","3":"Number","4":"513"},{"1":"Spain","2":"2020-01-01","3":"Number","4":"521"},{"1":"Sweden","2":"2018-01-01","3":"Number","4":"476"},{"1":"Sweden","2":"2020-01-01","3":"Number","4":"476"},{"1":"Switzerland","2":"2018-01-01","3":"Number","4":"539"},{"1":"Switzerland","2":"2020-01-01","3":"Number","4":"537"},{"1":"Türkiye","2":"2018-01-01","3":"Number","4":"151"},{"1":"Türkiye","2":"2020-01-01","3":"Number","4":"157"},{"1":"United Kingdom","2":"2018-01-01","3":"Number","4":"473"},{"1":"United Kingdom","2":"2020-01-01","3":"NA","4":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Kategorische Variablen werden als Text (<em>character</em>) eingelesen. Das bedeutet, dass wir R nicht (so leicht) fragen können, welche verschiedenen Merkmalsausprägungen die Variable enthält. Eine bessere Klasse für eine kategoriale Variable ist ein <strong>Faktor</strong> (<em>factor</em>). Bei einem Faktor werden die unterschiedlichen Merkmalsausprägungen (<em>levels</em>) explizit gespeichert. Wir wandeln daher die Text-Variable <code>geo</code> in einen Faktor um.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>car_numbers <span class="ot">&lt;-</span> car_numbers <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">geo_factor =</span> <span class="fu">as_factor</span>(geo))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Die Funktion <code>mutate()</code> kann neue Variablen in einem Datensatz erstellen, verändern oder löschen. In unserem Fall erstellen wir eine neue Variable, die wir <code>geo_factor</code> nennen. Die Funktion <code>as_factor()</code> wandelt (konvertiert) die Text-Variable <code>geo</code> in einen Faktor. Die Funktion <code>mutate()</code> fügt neue Variablen am Ende des <code>tibble</code>s ein:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>car_numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["geo"],"name":[1],"type":["chr"],"align":["left"]},{"label":["time"],"name":[2],"type":["date"],"align":["right"]},{"label":["unit"],"name":[3],"type":["chr"],"align":["left"]},{"label":["values"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["geo_factor"],"name":[5],"type":["fct"],"align":["left"]}],"data":[{"1":"Albania","2":"2018-01-01","3":"Number","4":"161","5":"Albania"},{"1":"Albania","2":"2020-01-01","3":"Number","4":"191","5":"Albania"},{"1":"Austria","2":"2018-01-01","3":"Number","4":"562","5":"Austria"},{"1":"Austria","2":"2020-01-01","3":"Number","4":"570","5":"Austria"},{"1":"Belgium","2":"2018-01-01","3":"Number","4":"511","5":"Belgium"},{"1":"Belgium","2":"2020-01-01","3":"Number","4":"510","5":"Belgium"},{"1":"Bulgaria","2":"2018-01-01","3":"Number","4":"396","5":"Bulgaria"},{"1":"Bulgaria","2":"2020-01-01","3":"Number","4":"414","5":"Bulgaria"},{"1":"Croatia","2":"2018-01-01","3":"Number","4":"409","5":"Croatia"},{"1":"Croatia","2":"2020-01-01","3":"Number","4":"433","5":"Croatia"},{"1":"Cyprus","2":"2018-01-01","3":"Number","4":"629","5":"Cyprus"},{"1":"Cyprus","2":"2020-01-01","3":"Number","4":"645","5":"Cyprus"},{"1":"Czechia","2":"2018-01-01","3":"Number","4":"540","5":"Czechia"},{"1":"Czechia","2":"2020-01-01","3":"Number","4":"565","5":"Czechia"},{"1":"Denmark","2":"2018-01-01","3":"Number","4":"447","5":"Denmark"},{"1":"Denmark","2":"2020-01-01","3":"Number","4":"466","5":"Denmark"},{"1":"Estonia","2":"2018-01-01","3":"Number","4":"563","5":"Estonia"},{"1":"Estonia","2":"2020-01-01","3":"Number","4":"608","5":"Estonia"},{"1":"Finland","2":"2018-01-01","3":"Number","4":"629","5":"Finland"},{"1":"Finland","2":"2020-01-01","3":"Number","4":"652","5":"Finland"},{"1":"France","2":"2018-01-01","3":"Number","4":"569","5":"France"},{"1":"France","2":"2020-01-01","3":"Number","4":"567","5":"France"},{"1":"Germany","2":"2018-01-01","3":"Number","4":"567","5":"Germany"},{"1":"Germany","2":"2020-01-01","3":"Number","4":"580","5":"Germany"},{"1":"Greece","2":"2018-01-01","3":"Number","4":"493","5":"Greece"},{"1":"Greece","2":"2020-01-01","3":"Number","4":"514","5":"Greece"},{"1":"Hungary","2":"2018-01-01","3":"Number","4":"373","5":"Hungary"},{"1":"Hungary","2":"2020-01-01","3":"Number","4":"403","5":"Hungary"},{"1":"Iceland","2":"2018-01-01","3":"Number","4":"749","5":"Iceland"},{"1":"Iceland","2":"2020-01-01","3":"Number","4":"731","5":"Iceland"},{"1":"Ireland","2":"2018-01-01","3":"Number","4":"445","5":"Ireland"},{"1":"Ireland","2":"2020-01-01","3":"Number","4":"458","5":"Ireland"},{"1":"Italy","2":"2018-01-01","3":"Number","4":"652","5":"Italy"},{"1":"Italy","2":"2020-01-01","3":"Number","4":"670","5":"Italy"},{"1":"Kosovo","2":"2018-01-01","3":"Number","4":"143","5":"Kosovo"},{"1":"Kosovo","2":"2020-01-01","3":"NA","4":"NA","5":"Kosovo"},{"1":"Latvia","2":"2018-01-01","3":"Number","4":"369","5":"Latvia"},{"1":"Latvia","2":"2020-01-01","3":"Number","4":"390","5":"Latvia"},{"1":"Liechtenstein","2":"2018-01-01","3":"Number","4":"780","5":"Liechtenstein"},{"1":"Liechtenstein","2":"2020-01-01","3":"Number","4":"779","5":"Liechtenstein"},{"1":"Lithuania","2":"2018-01-01","3":"Number","4":"512","5":"Lithuania"},{"1":"Lithuania","2":"2020-01-01","3":"Number","4":"560","5":"Lithuania"},{"1":"Luxembourg","2":"2018-01-01","3":"Number","4":"676","5":"Luxembourg"},{"1":"Luxembourg","2":"2020-01-01","3":"Number","4":"682","5":"Luxembourg"},{"1":"Malta","2":"2018-01-01","3":"Number","4":"608","5":"Malta"},{"1":"Malta","2":"2020-01-01","3":"Number","4":"597","5":"Malta"},{"1":"Montenegro","2":"2018-01-01","3":"Number","4":"332","5":"Montenegro"},{"1":"Montenegro","2":"2020-01-01","3":"Number","4":"338","5":"Montenegro"},{"1":"Netherlands","2":"2018-01-01","3":"Number","4":"494","5":"Netherlands"},{"1":"Netherlands","2":"2020-01-01","3":"Number","4":"503","5":"Netherlands"},{"1":"North Macedonia","2":"2018-01-01","3":"Number","4":"200","5":"North Macedonia"},{"1":"North Macedonia","2":"2020-01-01","3":"Number","4":"207","5":"North Macedonia"},{"1":"Norway","2":"2018-01-01","3":"Number","4":"516","5":"Norway"},{"1":"Norway","2":"2020-01-01","3":"Number","4":"544","5":"Norway"},{"1":"Poland","2":"2018-01-01","3":"Number","4":"617","5":"Poland"},{"1":"Poland","2":"2020-01-01","3":"Number","4":"664","5":"Poland"},{"1":"Portugal","2":"2018-01-01","3":"Number","4":"514","5":"Portugal"},{"1":"Portugal","2":"2020-01-01","3":"Number","4":"540","5":"Portugal"},{"1":"Romania","2":"2018-01-01","3":"Number","4":"332","5":"Romania"},{"1":"Romania","2":"2020-01-01","3":"Number","4":"379","5":"Romania"},{"1":"Serbia","2":"2018-01-01","3":"NA","4":"NA","5":"Serbia"},{"1":"Serbia","2":"2020-01-01","3":"Number","4":"315","5":"Serbia"},{"1":"Slovakia","2":"2018-01-01","3":"Number","4":"426","5":"Slovakia"},{"1":"Slovakia","2":"2020-01-01","3":"Number","4":"447","5":"Slovakia"},{"1":"Slovenia","2":"2018-01-01","3":"Number","4":"549","5":"Slovenia"},{"1":"Slovenia","2":"2020-01-01","3":"Number","4":"555","5":"Slovenia"},{"1":"Spain","2":"2018-01-01","3":"Number","4":"513","5":"Spain"},{"1":"Spain","2":"2020-01-01","3":"Number","4":"521","5":"Spain"},{"1":"Sweden","2":"2018-01-01","3":"Number","4":"476","5":"Sweden"},{"1":"Sweden","2":"2020-01-01","3":"Number","4":"476","5":"Sweden"},{"1":"Switzerland","2":"2018-01-01","3":"Number","4":"539","5":"Switzerland"},{"1":"Switzerland","2":"2020-01-01","3":"Number","4":"537","5":"Switzerland"},{"1":"Türkiye","2":"2018-01-01","3":"Number","4":"151","5":"Türkiye"},{"1":"Türkiye","2":"2020-01-01","3":"Number","4":"157","5":"Türkiye"},{"1":"United Kingdom","2":"2018-01-01","3":"Number","4":"473","5":"United Kingdom"},{"1":"United Kingdom","2":"2020-01-01","3":"NA","4":"NA","5":"United Kingdom"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Nun können wir R auch fragen, welche verschiedene Merkmalsausprägungen (<em>levels</em>) diese Variable enthält:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(car_numbers<span class="sc">$</span>geo_factor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Albania"         "Austria"         "Belgium"         "Bulgaria"       
 [5] "Croatia"         "Cyprus"          "Czechia"         "Denmark"        
 [9] "Estonia"         "Finland"         "France"          "Germany"        
[13] "Greece"          "Hungary"         "Iceland"         "Ireland"        
[17] "Italy"           "Kosovo"          "Latvia"          "Liechtenstein"  
[21] "Lithuania"       "Luxembourg"      "Malta"           "Montenegro"     
[25] "Netherlands"     "North Macedonia" "Norway"          "Poland"         
[29] "Portugal"        "Romania"         "Serbia"          "Slovakia"       
[33] "Slovenia"        "Spain"           "Sweden"          "Switzerland"    
[37] "Türkiye"         "United Kingdom" </code></pre>
</div>
</div>
<p>Die einzlenen Merkmalsausprägungen sind die verschiedenen Ländern. Der Datensatz enthält 38 unterschiedliche Länder.</p>
</section>
<section id="sec-geom-col" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="sec-geom-col"><span class="header-section-number">5.1.2</span> Balkendiagramm mit <code>geom_col()</code></h3>
<p>Wir möchten die Daten als Balkendiagramm darstellen. Das Ziel ist eine ähnliche Darstellung, wie in der Vorlesung.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="05-explorative-kategorial_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Dazu müssen wir zuerst eine neue Variable erstellen, die wir zum Einfärben der Jahre nutzen können. Dazu benötigen wir eine zusätzliche Bibliothek, du uns den Umgang mit Datum und Uhrzeit erleichtert. Sie heißt <code>lubridate</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nun nutzen wir die Funktion <code>year()</code> aus <code>lubridate</code>, um aus der Variablen <code>time</code> nur das Jahr zu extrahieren. Wir erstellen dazu mit <code>mutate()</code> wieder einen neue Variable, die wir <code>time_year</code> nennen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>car_numbers <span class="ot">&lt;-</span> car_numbers <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_year =</span> <span class="fu">year</span>(time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Auch diese Variable wir an das Ende des Datensatzes <code>car_numbers</code> gestellt.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>car_numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["geo"],"name":[1],"type":["chr"],"align":["left"]},{"label":["time"],"name":[2],"type":["date"],"align":["right"]},{"label":["unit"],"name":[3],"type":["chr"],"align":["left"]},{"label":["values"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["geo_factor"],"name":[5],"type":["fct"],"align":["left"]},{"label":["time_year"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"Albania","2":"2018-01-01","3":"Number","4":"161","5":"Albania","6":"2018"},{"1":"Albania","2":"2020-01-01","3":"Number","4":"191","5":"Albania","6":"2020"},{"1":"Austria","2":"2018-01-01","3":"Number","4":"562","5":"Austria","6":"2018"},{"1":"Austria","2":"2020-01-01","3":"Number","4":"570","5":"Austria","6":"2020"},{"1":"Belgium","2":"2018-01-01","3":"Number","4":"511","5":"Belgium","6":"2018"},{"1":"Belgium","2":"2020-01-01","3":"Number","4":"510","5":"Belgium","6":"2020"},{"1":"Bulgaria","2":"2018-01-01","3":"Number","4":"396","5":"Bulgaria","6":"2018"},{"1":"Bulgaria","2":"2020-01-01","3":"Number","4":"414","5":"Bulgaria","6":"2020"},{"1":"Croatia","2":"2018-01-01","3":"Number","4":"409","5":"Croatia","6":"2018"},{"1":"Croatia","2":"2020-01-01","3":"Number","4":"433","5":"Croatia","6":"2020"},{"1":"Cyprus","2":"2018-01-01","3":"Number","4":"629","5":"Cyprus","6":"2018"},{"1":"Cyprus","2":"2020-01-01","3":"Number","4":"645","5":"Cyprus","6":"2020"},{"1":"Czechia","2":"2018-01-01","3":"Number","4":"540","5":"Czechia","6":"2018"},{"1":"Czechia","2":"2020-01-01","3":"Number","4":"565","5":"Czechia","6":"2020"},{"1":"Denmark","2":"2018-01-01","3":"Number","4":"447","5":"Denmark","6":"2018"},{"1":"Denmark","2":"2020-01-01","3":"Number","4":"466","5":"Denmark","6":"2020"},{"1":"Estonia","2":"2018-01-01","3":"Number","4":"563","5":"Estonia","6":"2018"},{"1":"Estonia","2":"2020-01-01","3":"Number","4":"608","5":"Estonia","6":"2020"},{"1":"Finland","2":"2018-01-01","3":"Number","4":"629","5":"Finland","6":"2018"},{"1":"Finland","2":"2020-01-01","3":"Number","4":"652","5":"Finland","6":"2020"},{"1":"France","2":"2018-01-01","3":"Number","4":"569","5":"France","6":"2018"},{"1":"France","2":"2020-01-01","3":"Number","4":"567","5":"France","6":"2020"},{"1":"Germany","2":"2018-01-01","3":"Number","4":"567","5":"Germany","6":"2018"},{"1":"Germany","2":"2020-01-01","3":"Number","4":"580","5":"Germany","6":"2020"},{"1":"Greece","2":"2018-01-01","3":"Number","4":"493","5":"Greece","6":"2018"},{"1":"Greece","2":"2020-01-01","3":"Number","4":"514","5":"Greece","6":"2020"},{"1":"Hungary","2":"2018-01-01","3":"Number","4":"373","5":"Hungary","6":"2018"},{"1":"Hungary","2":"2020-01-01","3":"Number","4":"403","5":"Hungary","6":"2020"},{"1":"Iceland","2":"2018-01-01","3":"Number","4":"749","5":"Iceland","6":"2018"},{"1":"Iceland","2":"2020-01-01","3":"Number","4":"731","5":"Iceland","6":"2020"},{"1":"Ireland","2":"2018-01-01","3":"Number","4":"445","5":"Ireland","6":"2018"},{"1":"Ireland","2":"2020-01-01","3":"Number","4":"458","5":"Ireland","6":"2020"},{"1":"Italy","2":"2018-01-01","3":"Number","4":"652","5":"Italy","6":"2018"},{"1":"Italy","2":"2020-01-01","3":"Number","4":"670","5":"Italy","6":"2020"},{"1":"Kosovo","2":"2018-01-01","3":"Number","4":"143","5":"Kosovo","6":"2018"},{"1":"Kosovo","2":"2020-01-01","3":"NA","4":"NA","5":"Kosovo","6":"2020"},{"1":"Latvia","2":"2018-01-01","3":"Number","4":"369","5":"Latvia","6":"2018"},{"1":"Latvia","2":"2020-01-01","3":"Number","4":"390","5":"Latvia","6":"2020"},{"1":"Liechtenstein","2":"2018-01-01","3":"Number","4":"780","5":"Liechtenstein","6":"2018"},{"1":"Liechtenstein","2":"2020-01-01","3":"Number","4":"779","5":"Liechtenstein","6":"2020"},{"1":"Lithuania","2":"2018-01-01","3":"Number","4":"512","5":"Lithuania","6":"2018"},{"1":"Lithuania","2":"2020-01-01","3":"Number","4":"560","5":"Lithuania","6":"2020"},{"1":"Luxembourg","2":"2018-01-01","3":"Number","4":"676","5":"Luxembourg","6":"2018"},{"1":"Luxembourg","2":"2020-01-01","3":"Number","4":"682","5":"Luxembourg","6":"2020"},{"1":"Malta","2":"2018-01-01","3":"Number","4":"608","5":"Malta","6":"2018"},{"1":"Malta","2":"2020-01-01","3":"Number","4":"597","5":"Malta","6":"2020"},{"1":"Montenegro","2":"2018-01-01","3":"Number","4":"332","5":"Montenegro","6":"2018"},{"1":"Montenegro","2":"2020-01-01","3":"Number","4":"338","5":"Montenegro","6":"2020"},{"1":"Netherlands","2":"2018-01-01","3":"Number","4":"494","5":"Netherlands","6":"2018"},{"1":"Netherlands","2":"2020-01-01","3":"Number","4":"503","5":"Netherlands","6":"2020"},{"1":"North Macedonia","2":"2018-01-01","3":"Number","4":"200","5":"North Macedonia","6":"2018"},{"1":"North Macedonia","2":"2020-01-01","3":"Number","4":"207","5":"North Macedonia","6":"2020"},{"1":"Norway","2":"2018-01-01","3":"Number","4":"516","5":"Norway","6":"2018"},{"1":"Norway","2":"2020-01-01","3":"Number","4":"544","5":"Norway","6":"2020"},{"1":"Poland","2":"2018-01-01","3":"Number","4":"617","5":"Poland","6":"2018"},{"1":"Poland","2":"2020-01-01","3":"Number","4":"664","5":"Poland","6":"2020"},{"1":"Portugal","2":"2018-01-01","3":"Number","4":"514","5":"Portugal","6":"2018"},{"1":"Portugal","2":"2020-01-01","3":"Number","4":"540","5":"Portugal","6":"2020"},{"1":"Romania","2":"2018-01-01","3":"Number","4":"332","5":"Romania","6":"2018"},{"1":"Romania","2":"2020-01-01","3":"Number","4":"379","5":"Romania","6":"2020"},{"1":"Serbia","2":"2018-01-01","3":"NA","4":"NA","5":"Serbia","6":"2018"},{"1":"Serbia","2":"2020-01-01","3":"Number","4":"315","5":"Serbia","6":"2020"},{"1":"Slovakia","2":"2018-01-01","3":"Number","4":"426","5":"Slovakia","6":"2018"},{"1":"Slovakia","2":"2020-01-01","3":"Number","4":"447","5":"Slovakia","6":"2020"},{"1":"Slovenia","2":"2018-01-01","3":"Number","4":"549","5":"Slovenia","6":"2018"},{"1":"Slovenia","2":"2020-01-01","3":"Number","4":"555","5":"Slovenia","6":"2020"},{"1":"Spain","2":"2018-01-01","3":"Number","4":"513","5":"Spain","6":"2018"},{"1":"Spain","2":"2020-01-01","3":"Number","4":"521","5":"Spain","6":"2020"},{"1":"Sweden","2":"2018-01-01","3":"Number","4":"476","5":"Sweden","6":"2018"},{"1":"Sweden","2":"2020-01-01","3":"Number","4":"476","5":"Sweden","6":"2020"},{"1":"Switzerland","2":"2018-01-01","3":"Number","4":"539","5":"Switzerland","6":"2018"},{"1":"Switzerland","2":"2020-01-01","3":"Number","4":"537","5":"Switzerland","6":"2020"},{"1":"Türkiye","2":"2018-01-01","3":"Number","4":"151","5":"Türkiye","6":"2018"},{"1":"Türkiye","2":"2020-01-01","3":"Number","4":"157","5":"Türkiye","6":"2020"},{"1":"United Kingdom","2":"2018-01-01","3":"Number","4":"473","5":"United Kingdom","6":"2018"},{"1":"United Kingdom","2":"2020-01-01","3":"NA","4":"NA","5":"United Kingdom","6":"2020"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Eine Variable zum Einfärben mit zwei verschiedenen Farben (je Jahr eine andere Farbe) muss kategorial sein. Die Variable <code>time_year</code> ist aber numerisch. Daher nutzen wir <code>mutate()</code>, um <code>time_year</code> in einen Faktor zu verwandeln.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>car_numbers <span class="ot">&lt;-</span> car_numbers <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time_year =</span> <span class="fu">as_factor</span>(time_year))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In diesem Fall erstellt <code>mutate()</code> keine neue Variable, sondern überschreibt (verändert) die vorhandene Variable <code>time_year</code>. Das ist möglich und gängige Praxis in R. Jetzt ist <code>time_year</code> ein Faktor, was man auch in der Darstelung des <code>tibble</code> sehen kann.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>car_numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["geo"],"name":[1],"type":["chr"],"align":["left"]},{"label":["time"],"name":[2],"type":["date"],"align":["right"]},{"label":["unit"],"name":[3],"type":["chr"],"align":["left"]},{"label":["values"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["geo_factor"],"name":[5],"type":["fct"],"align":["left"]},{"label":["time_year"],"name":[6],"type":["fct"],"align":["left"]}],"data":[{"1":"Albania","2":"2018-01-01","3":"Number","4":"161","5":"Albania","6":"2018"},{"1":"Albania","2":"2020-01-01","3":"Number","4":"191","5":"Albania","6":"2020"},{"1":"Austria","2":"2018-01-01","3":"Number","4":"562","5":"Austria","6":"2018"},{"1":"Austria","2":"2020-01-01","3":"Number","4":"570","5":"Austria","6":"2020"},{"1":"Belgium","2":"2018-01-01","3":"Number","4":"511","5":"Belgium","6":"2018"},{"1":"Belgium","2":"2020-01-01","3":"Number","4":"510","5":"Belgium","6":"2020"},{"1":"Bulgaria","2":"2018-01-01","3":"Number","4":"396","5":"Bulgaria","6":"2018"},{"1":"Bulgaria","2":"2020-01-01","3":"Number","4":"414","5":"Bulgaria","6":"2020"},{"1":"Croatia","2":"2018-01-01","3":"Number","4":"409","5":"Croatia","6":"2018"},{"1":"Croatia","2":"2020-01-01","3":"Number","4":"433","5":"Croatia","6":"2020"},{"1":"Cyprus","2":"2018-01-01","3":"Number","4":"629","5":"Cyprus","6":"2018"},{"1":"Cyprus","2":"2020-01-01","3":"Number","4":"645","5":"Cyprus","6":"2020"},{"1":"Czechia","2":"2018-01-01","3":"Number","4":"540","5":"Czechia","6":"2018"},{"1":"Czechia","2":"2020-01-01","3":"Number","4":"565","5":"Czechia","6":"2020"},{"1":"Denmark","2":"2018-01-01","3":"Number","4":"447","5":"Denmark","6":"2018"},{"1":"Denmark","2":"2020-01-01","3":"Number","4":"466","5":"Denmark","6":"2020"},{"1":"Estonia","2":"2018-01-01","3":"Number","4":"563","5":"Estonia","6":"2018"},{"1":"Estonia","2":"2020-01-01","3":"Number","4":"608","5":"Estonia","6":"2020"},{"1":"Finland","2":"2018-01-01","3":"Number","4":"629","5":"Finland","6":"2018"},{"1":"Finland","2":"2020-01-01","3":"Number","4":"652","5":"Finland","6":"2020"},{"1":"France","2":"2018-01-01","3":"Number","4":"569","5":"France","6":"2018"},{"1":"France","2":"2020-01-01","3":"Number","4":"567","5":"France","6":"2020"},{"1":"Germany","2":"2018-01-01","3":"Number","4":"567","5":"Germany","6":"2018"},{"1":"Germany","2":"2020-01-01","3":"Number","4":"580","5":"Germany","6":"2020"},{"1":"Greece","2":"2018-01-01","3":"Number","4":"493","5":"Greece","6":"2018"},{"1":"Greece","2":"2020-01-01","3":"Number","4":"514","5":"Greece","6":"2020"},{"1":"Hungary","2":"2018-01-01","3":"Number","4":"373","5":"Hungary","6":"2018"},{"1":"Hungary","2":"2020-01-01","3":"Number","4":"403","5":"Hungary","6":"2020"},{"1":"Iceland","2":"2018-01-01","3":"Number","4":"749","5":"Iceland","6":"2018"},{"1":"Iceland","2":"2020-01-01","3":"Number","4":"731","5":"Iceland","6":"2020"},{"1":"Ireland","2":"2018-01-01","3":"Number","4":"445","5":"Ireland","6":"2018"},{"1":"Ireland","2":"2020-01-01","3":"Number","4":"458","5":"Ireland","6":"2020"},{"1":"Italy","2":"2018-01-01","3":"Number","4":"652","5":"Italy","6":"2018"},{"1":"Italy","2":"2020-01-01","3":"Number","4":"670","5":"Italy","6":"2020"},{"1":"Kosovo","2":"2018-01-01","3":"Number","4":"143","5":"Kosovo","6":"2018"},{"1":"Kosovo","2":"2020-01-01","3":"NA","4":"NA","5":"Kosovo","6":"2020"},{"1":"Latvia","2":"2018-01-01","3":"Number","4":"369","5":"Latvia","6":"2018"},{"1":"Latvia","2":"2020-01-01","3":"Number","4":"390","5":"Latvia","6":"2020"},{"1":"Liechtenstein","2":"2018-01-01","3":"Number","4":"780","5":"Liechtenstein","6":"2018"},{"1":"Liechtenstein","2":"2020-01-01","3":"Number","4":"779","5":"Liechtenstein","6":"2020"},{"1":"Lithuania","2":"2018-01-01","3":"Number","4":"512","5":"Lithuania","6":"2018"},{"1":"Lithuania","2":"2020-01-01","3":"Number","4":"560","5":"Lithuania","6":"2020"},{"1":"Luxembourg","2":"2018-01-01","3":"Number","4":"676","5":"Luxembourg","6":"2018"},{"1":"Luxembourg","2":"2020-01-01","3":"Number","4":"682","5":"Luxembourg","6":"2020"},{"1":"Malta","2":"2018-01-01","3":"Number","4":"608","5":"Malta","6":"2018"},{"1":"Malta","2":"2020-01-01","3":"Number","4":"597","5":"Malta","6":"2020"},{"1":"Montenegro","2":"2018-01-01","3":"Number","4":"332","5":"Montenegro","6":"2018"},{"1":"Montenegro","2":"2020-01-01","3":"Number","4":"338","5":"Montenegro","6":"2020"},{"1":"Netherlands","2":"2018-01-01","3":"Number","4":"494","5":"Netherlands","6":"2018"},{"1":"Netherlands","2":"2020-01-01","3":"Number","4":"503","5":"Netherlands","6":"2020"},{"1":"North Macedonia","2":"2018-01-01","3":"Number","4":"200","5":"North Macedonia","6":"2018"},{"1":"North Macedonia","2":"2020-01-01","3":"Number","4":"207","5":"North Macedonia","6":"2020"},{"1":"Norway","2":"2018-01-01","3":"Number","4":"516","5":"Norway","6":"2018"},{"1":"Norway","2":"2020-01-01","3":"Number","4":"544","5":"Norway","6":"2020"},{"1":"Poland","2":"2018-01-01","3":"Number","4":"617","5":"Poland","6":"2018"},{"1":"Poland","2":"2020-01-01","3":"Number","4":"664","5":"Poland","6":"2020"},{"1":"Portugal","2":"2018-01-01","3":"Number","4":"514","5":"Portugal","6":"2018"},{"1":"Portugal","2":"2020-01-01","3":"Number","4":"540","5":"Portugal","6":"2020"},{"1":"Romania","2":"2018-01-01","3":"Number","4":"332","5":"Romania","6":"2018"},{"1":"Romania","2":"2020-01-01","3":"Number","4":"379","5":"Romania","6":"2020"},{"1":"Serbia","2":"2018-01-01","3":"NA","4":"NA","5":"Serbia","6":"2018"},{"1":"Serbia","2":"2020-01-01","3":"Number","4":"315","5":"Serbia","6":"2020"},{"1":"Slovakia","2":"2018-01-01","3":"Number","4":"426","5":"Slovakia","6":"2018"},{"1":"Slovakia","2":"2020-01-01","3":"Number","4":"447","5":"Slovakia","6":"2020"},{"1":"Slovenia","2":"2018-01-01","3":"Number","4":"549","5":"Slovenia","6":"2018"},{"1":"Slovenia","2":"2020-01-01","3":"Number","4":"555","5":"Slovenia","6":"2020"},{"1":"Spain","2":"2018-01-01","3":"Number","4":"513","5":"Spain","6":"2018"},{"1":"Spain","2":"2020-01-01","3":"Number","4":"521","5":"Spain","6":"2020"},{"1":"Sweden","2":"2018-01-01","3":"Number","4":"476","5":"Sweden","6":"2018"},{"1":"Sweden","2":"2020-01-01","3":"Number","4":"476","5":"Sweden","6":"2020"},{"1":"Switzerland","2":"2018-01-01","3":"Number","4":"539","5":"Switzerland","6":"2018"},{"1":"Switzerland","2":"2020-01-01","3":"Number","4":"537","5":"Switzerland","6":"2020"},{"1":"Türkiye","2":"2018-01-01","3":"Number","4":"151","5":"Türkiye","6":"2018"},{"1":"Türkiye","2":"2020-01-01","3":"Number","4":"157","5":"Türkiye","6":"2020"},{"1":"United Kingdom","2":"2018-01-01","3":"Number","4":"473","5":"United Kingdom","6":"2018"},{"1":"United Kingdom","2":"2020-01-01","3":"NA","4":"NA","5":"United Kingdom","6":"2020"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Nun geht es an die Darstellung. Im Kapitel <a href="03-ggplot.html"><span>Chapter&nbsp;3</span></a> haben Sie das <code>geom_bar()</code> kennengelernt. Es kann die Anzahl der Einträge in einer Variablen auszählen und diese als Balkendiagramm darstellen. Das möchten wir aber in unserem Fall nicht. Wir wollen die Anzahl der Autos darstellen, die in der Variablen <code>value</code> enthalten ist. In anderen Worten, wir wollen Werte und keine ausgezählten Merkmalsausprägungen (<em>counts</em>) darstellen. Das ist die Aufgabe des <code>geom_col()</code> (col steht für columns, also Säulen/Balken).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> car_numbers, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> geo, <span class="at">y =</span> values, <span class="at">fill =</span> time_year)) <span class="sc">+</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05-explorative-kategorial_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Es ist noch etwas Nacharbeit nötig. Sieht man in die Hilfe von <code>geom_col()</code>, dann kann man nachlesen, dass es standardmäßig ein Stapelbalkendiagramm darstellt (<em>stacked bar plot</em> ). Möchte man die Balken nebeneinander haben (<em>dodged bar plot</em>), muss man das explizit sagen.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="05-explorative-kategorial_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Die Ländernamen erscheinen (wie es Standard ist) horizontal. In unserem Fall überdecken sie sich aber und wir sollten sie vertikal schreiben. Dazu gibt es eine neue Funktion aus <code>ggplot2</code>, die wie alle anderen mit einem <code>+</code> angehängt wird. Sie heißt <code>theme()</code>. Der Parameter, der die einzelnen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> car_numbers, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> geo, <span class="at">y =</span> values, <span class="at">fill =</span> time_year)) <span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_dodge</span>()) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3 rows containing missing values (geom_col).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="05-explorative-kategorial_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="lending-club-peer-to-peer-kredite" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="lending-club-peer-to-peer-kredite"><span class="header-section-number">5.2</span> Lending Club – Peer-to-Peer-Kredite</h2>
<p><a href="https://de.wikipedia.org/wiki/Lending_Club#cite_note-1">Lending Club</a>: Ein US-Unternehmen, das Individuen über eine Plattform ermöglicht, an andere Individuen Geld zu verleihen (Peer-to-Peer-Kredite). Wir haben den Datensatz bereits in der Vorlesung kennengelernt. Er ist in der Bibliothek <code>openintro</code> als <code>loands_full_schema</code> zu finden. Wir laden die Bibliothek und holen uns den Datensatz.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Das R-Paket (auch Bibliothek genannt) laden</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openintro)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Datensatz laden</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(loans_full_schema)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Datensatz ansehen</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(loans_full_schema)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 10,000
Columns: 55
$ emp_title                        &lt;chr&gt; "global config engineer ", "warehouse…
$ emp_length                       &lt;dbl&gt; 3, 10, 3, 1, 10, NA, 10, 10, 10, 3, 1…
$ state                            &lt;fct&gt; NJ, HI, WI, PA, CA, KY, MI, AZ, NV, I…
$ homeownership                    &lt;fct&gt; MORTGAGE, RENT, RENT, RENT, RENT, OWN…
$ annual_income                    &lt;dbl&gt; 90000, 40000, 40000, 30000, 35000, 34…
$ verified_income                  &lt;fct&gt; Verified, Not Verified, Source Verifi…
$ debt_to_income                   &lt;dbl&gt; 18.01, 5.04, 21.15, 10.16, 57.96, 6.4…
$ annual_income_joint              &lt;dbl&gt; NA, NA, NA, NA, 57000, NA, 155000, NA…
$ verification_income_joint        &lt;fct&gt; , , , , Verified, , Not Verified, , ,…
$ debt_to_income_joint             &lt;dbl&gt; NA, NA, NA, NA, 37.66, NA, 13.12, NA,…
$ delinq_2y                        &lt;int&gt; 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0…
$ months_since_last_delinq         &lt;int&gt; 38, NA, 28, NA, NA, 3, NA, 19, 18, NA…
$ earliest_credit_line             &lt;dbl&gt; 2001, 1996, 2006, 2007, 2008, 1990, 2…
$ inquiries_last_12m               &lt;int&gt; 6, 1, 4, 0, 7, 6, 1, 1, 3, 0, 4, 4, 8…
$ total_credit_lines               &lt;int&gt; 28, 30, 31, 4, 22, 32, 12, 30, 35, 9,…
$ open_credit_lines                &lt;int&gt; 10, 14, 10, 4, 16, 12, 10, 15, 21, 6,…
$ total_credit_limit               &lt;int&gt; 70795, 28800, 24193, 25400, 69839, 42…
$ total_credit_utilized            &lt;int&gt; 38767, 4321, 16000, 4997, 52722, 3898…
$ num_collections_last_12m         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ num_historical_failed_to_pay     &lt;int&gt; 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0…
$ months_since_90d_late            &lt;int&gt; 38, NA, 28, NA, NA, 60, NA, 71, 18, N…
$ current_accounts_delinq          &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ total_collection_amount_ever     &lt;int&gt; 1250, 0, 432, 0, 0, 0, 0, 0, 0, 0, 0,…
$ current_installment_accounts     &lt;int&gt; 2, 0, 1, 1, 1, 0, 2, 2, 6, 1, 2, 1, 2…
$ accounts_opened_24m              &lt;int&gt; 5, 11, 13, 1, 6, 2, 1, 4, 10, 5, 6, 7…
$ months_since_last_credit_inquiry &lt;int&gt; 5, 8, 7, 15, 4, 5, 9, 7, 4, 17, 3, 4,…
$ num_satisfactory_accounts        &lt;int&gt; 10, 14, 10, 4, 16, 12, 10, 15, 21, 6,…
$ num_accounts_120d_past_due       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, NA, 0, 0, 0, 0, …
$ num_accounts_30d_past_due        &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ num_active_debit_accounts        &lt;int&gt; 2, 3, 3, 2, 10, 1, 3, 5, 11, 3, 2, 2,…
$ total_debit_limit                &lt;int&gt; 11100, 16500, 4300, 19400, 32700, 272…
$ num_total_cc_accounts            &lt;int&gt; 14, 24, 14, 3, 20, 27, 8, 16, 19, 7, …
$ num_open_cc_accounts             &lt;int&gt; 8, 14, 8, 3, 15, 12, 7, 12, 14, 5, 8,…
$ num_cc_carrying_balance          &lt;int&gt; 6, 4, 6, 2, 13, 5, 6, 10, 14, 3, 5, 3…
$ num_mort_accounts                &lt;int&gt; 1, 0, 0, 0, 0, 3, 2, 7, 2, 0, 2, 3, 3…
$ account_never_delinq_percent     &lt;dbl&gt; 92.9, 100.0, 93.5, 100.0, 100.0, 78.1…
$ tax_liens                        &lt;int&gt; 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ public_record_bankrupt           &lt;int&gt; 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0…
$ loan_purpose                     &lt;fct&gt; moving, debt_consolidation, other, de…
$ application_type                 &lt;fct&gt; individual, individual, individual, i…
$ loan_amount                      &lt;int&gt; 28000, 5000, 2000, 21600, 23000, 5000…
$ term                             &lt;dbl&gt; 60, 36, 36, 36, 36, 36, 60, 60, 36, 3…
$ interest_rate                    &lt;dbl&gt; 14.07, 12.61, 17.09, 6.72, 14.07, 6.7…
$ installment                      &lt;dbl&gt; 652.53, 167.54, 71.40, 664.19, 786.87…
$ grade                            &lt;fct&gt; C, C, D, A, C, A, C, B, C, A, C, B, C…
$ sub_grade                        &lt;fct&gt; C3, C1, D1, A3, C3, A3, C2, B5, C2, A…
$ issue_month                      &lt;fct&gt; Mar-2018, Feb-2018, Feb-2018, Jan-201…
$ loan_status                      &lt;fct&gt; Current, Current, Current, Current, C…
$ initial_listing_status           &lt;fct&gt; whole, whole, fractional, whole, whol…
$ disbursement_method              &lt;fct&gt; Cash, Cash, Cash, Cash, Cash, Cash, C…
$ balance                          &lt;dbl&gt; 27015.86, 4651.37, 1824.63, 18853.26,…
$ paid_total                       &lt;dbl&gt; 1999.330, 499.120, 281.800, 3312.890,…
$ paid_principal                   &lt;dbl&gt; 984.14, 348.63, 175.37, 2746.74, 1569…
$ paid_interest                    &lt;dbl&gt; 1015.19, 150.49, 106.43, 566.15, 754.…
$ paid_late_fees                   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…</code></pre>
</div>
</div>
<section id="häufigkeitstabelle" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="häufigkeitstabelle"><span class="header-section-number">5.2.1</span> Häufigkeitstabelle</h3>
<p>Wir erstellen eine Häufigkeitstabelle der Variable <code>homeownership</code>. Dazu müssen wir die einzlenen Merkmalsausprägungen auszählen lassen. Das übernimmt die Funktion <code>count()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>loans_full_schema <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(homeownership)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["homeownership"],"name":[1],"type":["fct"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"MORTGAGE","2":"4789"},{"1":"OWN","2":"1353"},{"1":"RENT","2":"3858"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Das sieht anders aus, als in der Vorlesung. Das liegt daran, dass die Variable <code>homeownership</code> für die Vorlesung verändert wurde. Es ist nämlich störend, wenn die Merkmalsausprägungen mit Großbuchstaben geschrieben werden. Außerdem macht es logisch Sinn, zuerst die gemieteten, dann die mit einer Hypothek belegten und zum Schluss die Eigentumsobjekte zu sehen. Das spiegelt in einer gewissen Weise das Risiko wieder, das ein Kredit nicht bedient werden kann. Achtung: Es ist trotzdem keine ordinal-skalierte Variable!</p>
<p>Wir ändern die Darstellung der Variablen <code>homeownership</code>. Um den Originaldatensatz nicht zu überschreiben, erstellen wir einen neuen, den wir <code>loans</code> nennen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>loans <span class="ot">&lt;-</span> loans_full_schema <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">homeownership =</span> <span class="fu">tolower</span>(homeownership),</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">homeownership =</span> <span class="fu">fct_relevel</span>(homeownership, <span class="st">"rent"</span>, <span class="st">"mortgage"</span>, <span class="st">"own"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Sie sehen, dass man die beiden Änderungen in einem Aufruf zu <code>mutate()</code> durchführen darf. Zuerst macht die Funktion <code>tolower()</code> aus den Großbuchstaben Kleinbuchstaben, danach änder die Funktion <code>fct_relevel()</code> die Reihenfolge der Kategorien der Merkmalsausprägungen (<em>levles</em>). Jetzt entspricht das Ergebnis dem der Vorlesung.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>loans <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(homeownership)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["homeownership"],"name":[1],"type":["fct"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"rent","2":"3858"},{"1":"mortgage","2":"4789"},{"1":"own","2":"1353"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section>
<section id="kontingenztabelle" class="level3" data-number="5.2.2">
<h3 data-number="5.2.2" class="anchored" data-anchor-id="kontingenztabelle"><span class="header-section-number">5.2.2</span> Kontingenztabelle</h3>
<p>Eine Kontingenztabelle fasst zwei kategoriale Variablen zusammen. Jede Zeile zeigt die Anzahl der Kombinationen zwischen diesen Variablen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>loans <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(application_type, homeownership)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["application_type"],"name":[1],"type":["fct"],"align":["left"]},{"label":["homeownership"],"name":[2],"type":["fct"],"align":["left"]},{"label":["n"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"individual","2":"rent","3":"3496"},{"1":"individual","2":"mortgage","3":"3839"},{"1":"individual","2":"own","3":"1170"},{"1":"joint","2":"rent","3":"362"},{"1":"joint","2":"mortgage","3":"950"},{"1":"joint","2":"own","3":"183"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Die Tabelle sieht auch anders aus als in der Vorlesung. Sie ist nämlich <code>tidy</code>: jede Spalte ist eine Variable und jede Zeile ist eine Beobachtung. In diesem Fall möchte man es aber eigentlich <code>untidy</code> dargestellt haben. Das ist einer der seltenen Fälle, nämlich die Darstellung von Tabellen, wo das auch Sinn macht. Achtung, jetzt wird es nerdy 🤓.</p>
<p>Wir formatieren die Tabelle von lang <code>tidy</code> auf breit und <code>untidy</code>. Dabei wandern die Einträge der Spalte <code>homeowndership</code> in die Breite und werden zu neuen Spalten. Die einträge in den Tabellenzellen kommen aus der Spalte <code>n</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>loans <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(application_type, homeownership) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> homeownership, <span class="at">values_from =</span> n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["application_type"],"name":[1],"type":["fct"],"align":["left"]},{"label":["rent"],"name":[2],"type":["int"],"align":["right"]},{"label":["mortgage"],"name":[3],"type":["int"],"align":["right"]},{"label":["own"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"individual","2":"3496","3":"3839","4":"1170"},{"1":"joint","2":"362","3":"950","4":"183"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Jetzt fehlen nur noch die Zeilen- und Spaltensummen. Da hilft die Bibliothek <code>janitor</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>loans <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(application_type, homeownership) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> homeownership, <span class="at">values_from =</span> n) <span class="sc">%&gt;%</span> </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="fu">c</span>(<span class="st">"row"</span>, <span class="st">"col"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["application_type"],"name":[1],"type":["chr"],"align":["left"]},{"label":["rent"],"name":[2],"type":["int"],"align":["right"]},{"label":["mortgage"],"name":[3],"type":["int"],"align":["right"]},{"label":["own"],"name":[4],"type":["int"],"align":["right"]},{"label":["Total"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"individual","2":"3496","3":"3839","4":"1170","5":"8505"},{"1":"joint","2":"362","3":"950","4":"183","5":"1495"},{"1":"Total","2":"3858","3":"4789","4":"1353","5":"10000"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Bis auf wenige ästhetische Griffe ist das jetzt das Gleiche wie in der Vorlesung 😄.</p>
<!-- ## Lesestoff -->
<!-- Kapitel 2.1 in @ModernDive -->
</section>
</section>
<section id="aufgaben" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="aufgaben"><span class="header-section-number">5.3</span> Aufgaben</h2>
<section id="grafik-beschriften" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="grafik-beschriften"><span class="header-section-number">5.3.1</span> Grafik beschriften</h3>
<p>Beschriften Sie die finale Grafik aus <a href="#sec-geom-col"><span>Section&nbsp;5.1.2</span></a> so, dass sie wie dort anfangs dargestellt aussieht.</p>
</section>
<section id="aufgaben-der-funktion-theme" class="level3" data-number="5.3.2">
<h3 data-number="5.3.2" class="anchored" data-anchor-id="aufgaben-der-funktion-theme"><span class="header-section-number">5.3.2</span> Aufgaben der Funktion <code>theme()</code></h3>
<ol type="1">
<li>Lesen Sie nach, was die Aufgabe der Funktion <code>theme()</code> ist. Fassen Sie den Abschnitt <em>Description</em> kurz mit Ihren eigenen Worten zusammen.</li>
<li>Ich habe in der Vorlesung <code>theme_classic()</code> benutzt. Ändern Sie die finale Grafik in <a href="#sec-geom-col"><span>Section&nbsp;5.1.2</span></a> so, dass auch dort dieses <code>theme</code> benutzt wird.</li>
<li>Finden Sie heraus, was <code>hjust</code> und <code>vjust</code> tun. Probieren Sie die Werte 0, 0.5 und 1 aus. Wie ändert sich die Position der Ländernamen?</li>
</ol>
</section>
<section id="tutorium" class="level3" data-number="5.3.3">
<h3 data-number="5.3.3" class="anchored" data-anchor-id="tutorium"><span class="header-section-number">5.3.3</span> Tutorium</h3>
<p>Bearbeiten Sie das Tutorium “Einführung in Daten: 1 - Die Sprache der Daten”. Sie können entweder die deutsche Übersetzung oder das englische Original bearbeiten. Das Tutorium muss nicht hochgeladen werden.</p>
</section>
</section>
<section id="ihre-arbeit-einreichen" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="ihre-arbeit-einreichen"><span class="header-section-number">5.4</span> Ihre Arbeit einreichen</h2>
<ul>
<li>Speichern Sie Ihr Notebook ab.</li>
<li>Laden Sie Ihre .Rmd Datei in ILIAS hoch. <strong>Beachten Sie die Frist!</strong></li>
<li>Sie erhalten die Musterlösung nach dem Hochladen.</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./04-einlesen.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Daten in R einlesen und aus R speichern</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./references.html" class="pagination-link">
        <span class="nav-page-text">Literatur</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>